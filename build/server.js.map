{"version":3,"sources":["../server/server.js"],"names":["require","config","IS_DEV","process","env","Promise","log","path","express","webpack","jwt","app","webpackDevMiddleware","webpackHotMiddleware","webpackConfig","compiler","use","noInfo","publicPath","output","engine","renderFile","set","static","__dirname","checkToken","secret","getToken","req","headers","router","res","redirect","port","PORT","server","Server","version","listen","info"],"mappings":"AAAA;;AACAA,QAAQ,gBAAR;AACA;AACAA,QAAQ,QAAR,EAAkBC,MAAlB;IACOC,M,GAAUC,QAAQC,G,CAAlBF,M;;AAEP;;AACA,IAAMG,UAAUL,QAAQ,UAAR,CAAhB;AACA,IAAMM,MAAMN,QAAQ,aAAR,CAAZ;AACA,IAAMO,OAAOP,QAAQ,MAAR,CAAb;AACA,IAAMQ,UAAUR,QAAQ,SAAR,CAAhB;AACA,IAAMS,UAAUT,QAAQ,SAAR,CAAhB;AACA,IAAMU,MAAMV,QAAQ,aAAR,CAAZ;;AAGA,IAAMW,MAAMH,SAAZ;;AAEA,IAAGN,WAAW,MAAd,EAAsB;AACpB,MAAMU,uBAAuBZ,QAAQ,wBAAR,CAA7B;AACA,MAAMa,uBAAuBb,QAAQ,wBAAR,CAA7B;AACA,MAAIc,gBAAgBd,QAAQ,sBAAR,CAApB;AACA,MAAIe,WAAWN,QAAQK,aAAR,CAAf;AACAH,MAAIK,GAAJ,CAAQhB,QAAQ,wBAAR,EAAkCe,QAAlC,EAA4C;AAChDE,YAAQ,IADwC,EAClCC,YAAYJ,cAAcK,MAAd,CAAqBD;AADC,GAA5C,CAAR;AAGAP,MAAIK,GAAJ,CAAQhB,QAAQ,wBAAR,EAAkCe,QAAlC,CAAR;AACD;;AAEDJ,IAAIK,GAAJ,CAAQhB,QAAQ,QAAR,GAAR,E,CAA6B;AAC7BW,IAAIK,GAAJ,CAAQhB,QAAQ,MAAR,GAAR,E,CAA2B;AAC3BW,IAAIS,MAAJ,CAAW,MAAX,EAAmBpB,QAAQ,KAAR,EAAeqB,UAAlC;AACAV,IAAIW,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AACAX,IAAIK,GAAJ,CAAQR,QAAQe,MAAR,CAAkBC,SAAlB,gBAAR;;AAEA;AACA,IAAMC,aAAa;AACjBC,UAAQ,QADS;AAEjBC,YAAU,kBAACC,GAAD,EAAS;AACjB,QAAGA,IAAIC,OAAJ,CAAY,gBAAZ,CAAH,EAAkC,OAAOD,IAAIC,OAAJ,CAAY,gBAAZ,CAAP,CAAlC,KACK,OAAO,IAAP;AACN;AALgB,CAAnB;AAOAlB,IAAIK,GAAJ,CAAQ,CAAC,gBAAD,EAAmB,cAAnB,CAAR,EAA4CN,IAAIe,UAAJ,CAA5C;;AAEA,IAAMK,SAAS9B,QAAQ,gBAAR,CAAf;AACAW,IAAIK,GAAJ,CAAQ,GAAR,EAAac,MAAb;AACAnB,IAAIK,GAAJ,CAAQ,GAAR,EAAa,UAACY,GAAD,EAAMG,GAAN;AAAA,SAAcA,IAAIC,QAAJ,CAAa,GAAb,CAAd;AAAA,CAAb;;AAEA,IAAMC,OAAO9B,QAAQC,GAAR,CAAY8B,IAAZ,IAAoB,IAAjC;AACA,IAAMC,SAASnC,QAAQ,MAAR,EAAgBoC,MAAhB,CAAuBzB,GAAvB,CAAf;;AAEA,IAAM0B,oCAAkCrC,QAAQ,iBAAR,EAA2BqC,OAAnE;AACA;AACAF,OAAOG,MAAP,CAAcL,IAAd,EAAoB,YAAM;AACxB3B,MAAIiC,IAAJ,0BAAgCrC,MAAhC;AACAI,MAAIiC,IAAJ,MAAYF,OAAZ;AACA/B,MAAIiC,IAAJ,2CAAuCN,IAAvC;AACD,CAJD","file":"server.js","sourcesContent":["'use strict'\nrequire('babel-polyfill')\n// env\nrequire('dotenv').config()\nconst {IS_DEV} = process.env\n\n// dependencies\nconst Promise = require('bluebird')\nconst log = require('./logger.js')\nconst path = require('path')\nconst express = require('express')\nconst webpack = require('webpack')\nconst jwt = require('express-jwt')\n\n\nconst app = express()\n\nif(IS_DEV === 'true') {\n  const webpackDevMiddleware = require(\"webpack-dev-middleware\")\n  const webpackHotMiddleware = require(\"webpack-hot-middleware\")\n  var webpackConfig = require('../webpack.config.js')\n  var compiler = webpack(webpackConfig);\n  app.use(require(\"webpack-dev-middleware\")(compiler, {\n      noInfo: true, publicPath: webpackConfig.output.publicPath\n  }))\n  app.use(require(\"webpack-hot-middleware\")(compiler))\n}\n\napp.use(require('helmet')()) // use helmet\napp.use(require('cors')()) // enable CORS\napp.engine('html', require('ejs').renderFile)\napp.set('view engine', 'html')\napp.use(express.static(`${__dirname}/../public`))\n\n// PROTECTED PATHS\nconst checkToken = {\n  secret: 'secret',\n  getToken: (req) => {\n    if(req.headers['x-access-token']) return req.headers['x-access-token']\n    else return null\n  }\n}\napp.use(['/api/members/*', '/api/members'], jwt(checkToken))\n\nconst router = require('./routes/index')\napp.use('/', router)\napp.use('/', (req, res) => res.redirect('/'))\n\nconst port = process.env.PORT || 8000\nconst server = require('http').Server(app)\n\nconst version = `Express-Boilerplate v${require('../package.json').version}`\n// start server\nserver.listen(port, () => {\n  log.info(`IS RUNNING IN DEV:: ${IS_DEV}`)\n  log.info(`${version}`)\n  log.info(`==>  ğŸ’»  Listening on Port ${port}  ğŸ’»  <==`)\n})\n"]}