{"version":3,"sources":["../server/logger.js"],"names":["bunyan","require","Stream","prettystream","writable","write","console","log","JSON","parse","obj","msg","module","exports","createLogger","name","streams","level","stream","path"],"mappings":";;AAAA;;;;;;AAMA,IAAMA,SAASC,QAAQ,QAAR,CAAf;;AAEA;AACA,IAAMC,SAASD,QAAQ,QAAR,CAAf;;AAEA,IAAME,eAAe,IAAID,MAAJ,EAArB;AACAC,aAAaC,QAAb,GAAwB,IAAxB;AACAD,aAAaE,KAAb,GAAqB;AAAA,SAAOC,QAAQC,GAAR,CAAYC,KAAKC,KAAL,CAAWC,GAAX,EAAgBC,GAA5B,CAAP;AAAA,CAArB;;AAEA;AACAC,OAAOC,OAAP,GAAiBb,OAAOc,YAAP,CAAoB;AACnCC,QAAM,aAD6B;AAEnCC,WAAS,CAAC;AACRC,WAAO,MADC;AAERC,YAAQf;AAFA,GAAD,EAIT;AACEc,WAAO,OADT;AAEEE,UAAM;AAFR,GAJS,EAQT;AACEF,WAAO,OADT;AAEEE,UAAM;AAFR,GARS;AAF0B,CAApB,CAAjB","file":"logger.js","sourcesContent":["/*\n  Custom wrapper over Bunyan to pretty-print to console, while logging full JSON to log files\n  needed b/c Bunyan doesn't support it except for CLI/pipe\n  example usage: \"const log = require('./logger.js); log.info('Log initiated.');\"\n*/\n\nconst bunyan = require('bunyan');\n\n// custom stream to pretty-print\nconst Stream = require('stream');\n\nconst prettystream = new Stream();\nprettystream.writable = true;\nprettystream.write = obj => console.log(JSON.parse(obj).msg);\n\n// routes JSON log content to several places...\nmodule.exports = bunyan.createLogger({\n  name: 'general-log',\n  streams: [{\n    level: 'info',\n    stream: prettystream,\n  },\n  {\n    level: 'error',\n    path: './logs/bunyan-error.log',\n  },\n  {\n    level: 'debug',\n    path: './logs/bunyan-debug.log',\n  },\n  ],\n});\n"]}